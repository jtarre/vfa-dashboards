extends layout

block content
	h1= title
	h2= "Select Fellow"
	select#fellow
		each id, name in fellowList
			option(id=id) #{name}
	br
	br
	h2= "Log Notes"
	label Subject
	input(id="subject")
	br
	label Notes 
	textarea(id="notes")
	br
	label User 
	select#vfaList
		each id, name in vfaList
			option(id=id) #{name}
	br
	br
	button#logNotes Log Notes
	p#noteSubmission
	br
	h2= "CoPa Potential Partners"
	each record, index in results 
		p= record.Name
	p#results
	script.
		$("#fellow").change(function(e){
			console.log("Here!");
			//e.preventDefault();
			var sfId = $(this).find('option:selected').attr("id");
			console.log(sfId);
			$.get("users", {id: sfId}, function ( data ) {
				console.log("data: " + data)
				$('#results').html(data);
			});
		})
	script.
		$("#logNotes").click(function(e){
			console.log("clicked!");
			var subject = $("#subject").val();
			console.log("subject: " + subject);
			var notes = $("#notes").val();
			console.log("notes: " + notes);
			$.post("lognotes", {
				subject     : subject, 
				description : notes
			}, function (data) {
				alert("notes logged!");
			})
		})

