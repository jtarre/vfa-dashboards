<div ng-controller="homeCtrl" ng-cloak>
	<div ng-if="!auth">
		Welcome to the VFA Logger. This is a site for VFA team members to manage their salesforce information and activities.
	</div>


	<div ng-if="auth">
		<script type="text/ng-template" id="customPopupTemplate.html">
			<div class="custom-popup-wrapper" ng-style="{top: position().top+'px', left: position().left+'px'}" style="display: block;" ng-show="isOpen() && !moveInProgress" aria-hidden="{{!isOpen()}}">

			<ul class="dropdown-menu" role="listbox">
				<li class="dropdown-header">Fellow</li>
				<li ng-if="match.model.type==='fellow'" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">
				<div ng-if="match.model.region==='southeast'" uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>
				</li>

				<li class="dropdown-header">Contact</li>
				<li ng-if="match.model.type==='contact'" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">
				<div ng-if="match.model.region==='southeast'" uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>
				</li>

				<li class="dropdown-header">Account</li>
				<li ng-if="match.model.type==='account'"ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">
				<div ng-if="match.model.region==='southeast'" uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>
				</li>
				
			</ul>
			</div>
		</script>

		<ul class="nav nav-tabs" id="tabs">
			<li>
				<a href="#info">Get Info / Update</a>
			</li>
			<li class="active">
				<a href="#notes">Create Note</a>
			</li>
			<li>
				<a href="#contacts">Create Contact</a>
			</li>
			<li>
				<a href="#accounts">Create Account</a>
			</li>
			<li>
				<a href="#cases">Create Case</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane" id="info">

				<div class="input-group">
					<input type="text" ng-model="asyncSelected" typeahead-popup-template-url="customPopupTemplate.html" placeholder="Locations loaded via $http" uib-typeahead="record as record.name for record in getRecords($viewValue)" typeahead-loading="loadingLocations" typeahead-no-results="noResults" class="form-control">
					<i ng-show="loadingRecords" class="glyphicon glyphicon-refresh"></i>
				    <div ng-show="noResults">
				      <i class="glyphicon glyphicon-remove"></i> No Results Found
				    </div>
				</div>


				<fellow-profile ng-if="isFellow" id="id"></fellow-profile>
				<contact-profile ng-if="isContact" id="id"></contact-profile>
				<company-profile ng-if="isCompany" id="id"></company-profile>
				<div class="tab-pane active" id="notes">
					<note-logger></note-logger>
				</div>
				<div class="tab-pane" id="contacts">
					<contact-create></contact-create>
				</div>
				<div class="tab-pane" id="accounts">
					<account-create></account-create>
				</div>
				<div class="tab-pane" id="cases">
					<case-create></case-create>
				</div>
			</div>

			<script>
			$('#tabs a').click(function(e) {
				e.preventDefault();
				$(this).tab('show');
			});
			</script>
		</div>
	</div>
</div>