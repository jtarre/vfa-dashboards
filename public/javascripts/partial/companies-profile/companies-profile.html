<div ng-controller="companyCtrl">
	<md-toolbar>
		<div class="md-toolbar-tools">
			<h2>{{supporterInfo.Name}}</h2>
			<span flex></span>
		</div>
	</md-toolbar>
	<md-tabs md-dynamic-height="true">
		<md-tab label="Log Notes">
			<div layout="column">
				<md-autocomplete md-selected-item="notes.contact" md-items="contact in contacts" md-item-text="contact.Name" md-search-text="contactSearchText" md-floating-label="Contact">
					<md-item-template>
						{{contact.Name}}
					</md-item-template>
				</md-autocomplete>
				<md-autocomplete md-selected-item="notes.relatedTo" md-items="listItem in relatedToList" md-item-text="listItem.name" md-search-text="itemSearchText" md-floating-label="Related To (Account or Opportunity)">
					<md-item-template>
						{{listItem.name}}
					</md-item-template>
				</md-autocomplete>
				<md-input-container>
					<label>Subject</label>
					<input ng-model="notes.Subject" type="text">
				</md-input-container>
				<md-input-container>
					<label>Notes</label>
					<textarea ng-model="notes.Description" columns="1" rows="5"></textarea>
				</md-input-container>
				<md-autocomplete md-selected-item="notes.user" md-items="user in users" md-item-text="user.Name" md-floating-label="You">
					<md-item-template>
						{{user.Name}}
					</md-item-template>
				</md-autocomplete>
				<md-button class="md-raised" ng-click="logNotes(notes)">Log Notes</button>
			</div>
		</md-tab>
		<md-tab label="Background">
			<md-content layout-padding>
				<div layout="column">
					<md-checkbox ng-model="isEdit" ng-change="!isEdit">Editable</md-checkbox>
					<md-button ng-if="isEdit" class="md-raised" ng-click="update(companyInfo)">
						Update Account
					</md-button>
				</div>
				<div layout="column" ng-repeat="field in companyInfo">
					<p ng-if="!isEdit"><strong>{{field.label}}</strong>: {{field.value}}</p>
					<md-input-container ng-if="isEdit && field.type === 'text'" class="md-block">
						<label>{{field.label}}</label>
						<input type="text" ng-model="field.value">
					</md-input-container>
					<md-input-container ng-if="isEdit && field.type === 'textarea'" class="md-block">
						<label>{{field.label}}</label>
						<textarea ng-model="field.value" columns="1" rows="5"></textarea>
					</md-input-container>
					<label ng-if="isEdit && field.type === 'picklist'">{{field.label}}</label>
					<md-autocomplete ng-if="isEdit && field.type === 'picklist'" md-selected-item="field.value" md-items="item in field.picklist" >
						<md-item-template>
							{{item}}
						</md-item-template>
					</md-autocomplete>
				</div>
			</md-content>
		</md-tab>
		<md-tab label="Contacts">
			<md-list>
				<md-list-item class="md-3-line" ng-repeat="contact in contacts" layout="column"> 
					<div class="md-line-item-text">
						<h3>{{contact.Name}}</h3>
						<h4>{{contact.Title}}</h4>
						<p>{{contact.Email}}</p>
					</div>
				</md-list-item>
			</md-list>
		</md-tab>
		<md-tab label="Opportunities">
			<md-list>
				<md-list-item class="md-3-line" ng-repeat="opportunity in opportunities" layout="column" > 
					<div class="md-line-item-text">	
						<h3>{{opportunity.Name}}</h3>
						<h4>{{opportunity.Description}}</h4>
						<p>Expected Close Date: {{opportunity.CloseDate}}</p>
					</div>
				</md-list-item>
			</md-list>
		</md-tab>
	</md-tabs>

	<div class="col-md-5">
		<h2>Log Notes</h2>
		<label>Subject:</label>
		<input type="text" ng-model="subject">
		<br><br>
		<label>Notes:</label>
		<br>
		<textarea style="height:75px;width:100px" ng-model="description"></textarea>
		<br><br>
		<select ng-model="vfaId" ng-options="vfa.id as vfa.name for vfa in vfaTeam"></select>
		<br><br>
		<button ng-click="logNotes(subject, description, vfaId, salesforceDataInUse.Id)">
			Log Notes
		</button>
		<hr>
		<button ng-click="update(salesforceDataInUse.Id, salesforceDataInUse)">Update Account</button>
		<h2>Company Info</h2>
		<!-- <h3>{{salesforceDataInUse.Name}}</h3> -->
		<label>CoPa Association</label>
		<select ng-model="salesforceDataInUse.CoPa_Association__c" ng-options="association.value as association.label for association in salesforceDropdownFields.CoPa_Association__c.picklist"></select>
		<br>
		<label>VFA City</label>
		<select ng-model="salesforceDataInUse.VFA_City__c" ng-options="association.value as association.label for association in salesforceDropdownFields.VFA_City__c.picklist"></select>
		<br>
		<label>Twitter</label>
		<input type="text" value="{{salesforceDataInUse.Twitter_Handle__c}}">
		<br>
		<hr>
		<label>Description</label>
		<textarea ng-model="salesforceDataInUse.Description">{{salesforceDataInUse.Description}}</textarea>
		<br>
		<label>Year Founded</label>
		<input type="number" value="{{salesforceDataInUse.Year_Founded__c}}">
		<br>
		<label>Number of Employees</label>
		<input type="number" value="{{salesforceDataInUse.NumberOfEmployees}}">
		<br>
		<label>Company Type</label>
		<select ng-model="salesforceDataInUse.Company_Type__c" ng-options="association.value as association.label for association in salesforceDropdownFields.Company_Type__c.picklist"></select>
		<br>
		<label>Customer Type</label>
		<select ng-model="salesforceDataInUse.Customer_Type__c" ng-options="association.value as association.label for association in salesforceDropdownFields.Customer_Type__c.picklist"></select>
		<br>
		<label>Product Type</label>
		<select ng-model="salesforceDataInUse.Product_Type__c" ng-options="association.value as association.label for association in salesforceDropdownFields.Product_Type__c.picklist"></select>
		<br>
		<label>Funding Type</label>
		<select ng-model="salesforceDataInUse.Funding_Type__c" ng-options="association.value as association.label for association in salesforceDropdownFields.Funding_Type__c.picklist"></select>
		<br>
		<label>Funding Amount</label>
		<select ng-model="salesforceDataInUse.Funding_Amount__c" ng-options="association.value as association.label for association in salesforceDropdownFields.Funding_Amount__c.picklist"></select>
		<br>
		<label>Female Founder</label>
		<select ng-model="salesforceDataInUse.Female_Founder__c" ng-options="association.value as association.label for association in salesforceDropdownFields.Female_Founder__c.picklist"></select>
		<br>
		<label>URM Founder</label>
		<select ng-model="salesforceDataInUse.URM_Founder__c" ng-options="association.value as association.label for association in salesforceDropdownFields.URM_Founder__c.picklist"></select>
		<br>
	</div>
</div>